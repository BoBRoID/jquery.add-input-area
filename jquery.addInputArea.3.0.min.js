/*
jQuery Plugin
jquery.addInputArea.3.0
Yuusaku Miyazaki (toumin.m7@gmail.com)
MIT License
*/
(function(e){e.fn.addInputArea=function(f){return this.each(function(){f=d(this,f);e(this).find(f.area_del).hide();a(this,f);b(this,f)})};function d(g,f){var h=e(g).attr("id");f=e.extend({attr_name:(h)?h+"_%d":"aia_%d",area_var:(h)?"."+h+"_var":".aia_var",area_del:false,btn_del:(h)?"."+h+"_del":".aia_del",btn_add:(h)?"."+h+"_add":".aia_add"},f);if(!f.area_del){f.area_del=f.btn_del}return f}function a(g,f){e(f.btn_add).click(function(i){e(g).find(f.area_del).show();var j=e(g).find(f.area_var).length;var h=e(g).find(f.area_var).eq(0).clone();e(h).find("[name]").each(function(k,l){c(l,j);e(l).val("").text("")});e(h).find("[for]").each(function(k,l){c(l,j)});e(g).append(h)});e(g).find(f.btn_del).live("click",function(i){i.preventDefault();var h=e(g).find(f.btn_del).index(i.target);e(g).find(f.area_var).eq(h).remove();var j=e(g).find(f.area_var).length;if(j==1){e(g).find(f.area_del).hide()}b(g,f)})}function b(g,f){e(g).find(f.area_var).each(function(h,i){e(i).find("[name]").each(function(j,k){c(k,h)});e(i).find("[for]").each(function(j,k){c(k,h)})})}function c(h,f){var g=(e(h).attr("name"))?"name":"for";if(/(?:(?![0-9]+$).)+[0-9]+$/.test(e(h).attr(g))){var i=e(h).attr(g).replace(/((?:(?![0-9]+$).)+)[0-9]+$/,function(){return arguments[1]+f})}else{if(e(h).attr("name_format")){var i=e(h).attr("name_format").replace("%d",f)}}e(h).attr(g,i);if(g=="name"){e(h).attr("id",i)}}})(jQuery);
